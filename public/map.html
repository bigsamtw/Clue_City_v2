<!DOCTYPE html>
<html>

<head>
  <title>Clue City</title>
  <meta name="viewport" content="initial-scale=1.0 , width=device-width, user-scalable=no">
  <meta charset="utf-8">
  <link rel="stylesheet" href="./styles/map.css" href="semantic/out/semantic.min.css">

  <link rel="manifest" href="/manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="#FFFFFF">
  <meta name="apple-mobile-web-app-title" content="Clue City">
  <link rel="apple-touch-icon" href="images/logo.png">
  <meta name="msapplication-TileImage" content="images/icons/icon-144x144.png">
  <meta name="msapplication-TileColor" content="#2F3BA2">
</head>

<body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <div id="title_bar">
    <img id="title" src="./images/Map/clues_city.png">
    <img id="user_pic" src="./images/Map/user.jpg">
  </div>

  <div id="game_bar">
    <img id="game_bar_background" src="./images/Map/game_bar.png">
    <img id="decoration1" src="./images/Map/decoration.png">
    <img id="decoration2" src="./images/Map/decoration.png">
    <a id="team_name">吃飯睡覺懶惰蟲</a>
    <img id="game_count" src="./images/Map/game_count.png">
    <span id="time"></span>
    <img id="game_score" src="./images/Map/game_score.png">
  </div>
  <div id="map"></div>
  <img id="btn_camera" src="./images/Map/btn_camera.png" onclick="btn_camera_onclick()">
  <div id="bottom_navigation">
    <img id="bottom_navigation_background" src="./images/Map/button_bar.png">
    <img id="nav_home" src="./images/Map/nav_home.png">
    <img id="nav_gallery" src="./images/Map/nav_gallery.png">
    <img id="nav_gallery" src="./images/Map/nav_gallery.png">
    <img id="nav_group" src="./images/Map/nav_group.png">
    <div id="time"></div>
    <img id="nav_score" src="./images/Map/nav_score.png" onclick="ss()">
  </div>

  <div id="big_clue">
    <img id="big_clue_background" class="big_clue" src="./images/Map/big_clue_background.png">
    <img id="btn_hide" class="big_clue" src="./images/Map/btn_hide.png" onclick="btn_hide_onclick()">
    <img id="btn_clue" class="big_clue" src="./images/Map/btn_clue.png">
    <img id="big_clues_picture" class="big_clue" src="./images/Map/clues_picture.jpg">
    <img id="fb" src="./images/PhotoSharing/FB.png">
    <img id="ig" src="./images/PhotoSharing/IG.png">
    <img id="twitter" src="./images/PhotoSharing/twitter.png">
    <img id="success" src="./images/PhotoSharing/success.png">
  </div>

  <div id="small_clue">
    <img id="small_clue_background" class="small_clue" src="./images/Map/small_clue_background.png" onclick="small_clue_onclick()">
    <img id="small_clue_picture" class="small_clue" src="./images/Map/clues_picture.jpg" onclick="small_clue_onclick()">
  </div>

  <div class="form-group">
    <label>File input:</label>
    <input type="file" name="file" id="file">
  </div>
  <button id="upload" class="btn btn-default">提交</button>


  <!-- <form id = "upload_form"  enctype="multipart/form-data">

      <input id = "submit_image"type="file" name="image" accept="image/*" capture="user" >
      <button id = "submit_button"  onClick = "onSubmitButtonClicked()">Upload </button>


       <label id="submit_image_label" >
          
      </label>
      <label id="submit_button_label" >
          
      </label>
    </form> -->
  <h1 id="upload_response"> </h1>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAsi5IZ6geUCsf8gaf2olTlfXDxZw4K340&callback=initMap" async
    defer></script>
  <script src="./scripts/map.js" type="text/javascript"></script>
  <script src="../routes/map.js" type="text/javascript"> </script>

  <script>
    function uploadFile() {
      //上傳圖片的input
      var file = document.getElementById("file")
      //因為準備用post提交，又因為圖片的內容比較大，所以我們選擇使用formdata來承載數據
      //創建formdata對象
      var formData = new FormData();
      //給formdata對象中放入數據(鍵值對的方式)
      formData.append('file', file.files[0]);
      //提交請求
      $.ajax({
        url: './map/upload',//請求路徑
        type: 'POST',
        data: formData,
        contentType: false,//為了讓瀏覽器根據傳入的formdata來判斷contentType
        processData: false,//同上
        success: function (data) {
          if (200 === data.code) {
            console.log("上傳成功！");
          } else {
            console.log("上傳失敗！");
          }
          console.log(2)
        },
        error: function () {
          console.log("與服務器通信發生錯誤");
        }
      });
      console.log(1)
    }
    //給按鈕添加點擊事件
    function postPage() {
      //上傳按鈕
      var uploada = document.getElementById('upload');
      uploada.addEventListener("click", function () {
        uploadFile();
      }, false);
    }
    window.onload = function () {
      postPage();
    }

  </script>

</body>

</html>